# üö® –°–†–û–ß–ù–û: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É 401 –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –û—à–∏–±–∫–∞ 401 –≤—Å—ë –µ—â—ë –µ—Å—Ç—å

**–û—à–∏–±–∫–∞:** "Your authentication token is not from a valid issuer"

**–ì–¥–µ:** <https://chatedem.com> –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç

---

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞ Vercel?

**–ü—Ä–æ–≤–µ—Ä—å:**

1. –û—Ç–∫—Ä–æ–π: <https://vercel.com/dashboard>
2. –ù–∞–π–¥–∏ –ø—Ä–æ–µ–∫—Ç (–º–æ–∂–µ—Ç –±—ã—Ç—å `ai-chat-pro` –∏–ª–∏ `chatedem.com`)
3. Settings ‚Üí Environment Variables
4. –ü—Ä–æ–≤–µ—Ä—å –Ω–∞–ª–∏—á–∏–µ:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - `SUPABASE_SERVICE_ROLE_KEY`
   - `OPENAI_API_KEY`

**–ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ù–ï–¢** ‚Üí –¥–æ–±–∞–≤—å –∏—Ö (—Å–º. –Ω–∏–∂–µ)

**–ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ï–°–¢–¨** ‚Üí –ø—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å (—Å–º. –Ω–∏–∂–µ)

---

### 2. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

**–ö–†–ò–¢–ò–ß–ù–û:** `NEXT_PUBLIC_SUPABASE_ANON_KEY` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å anon key, –ù–ï service role key!

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

1. –°–∫–æ–ø–∏—Ä—É–π `NEXT_PUBLIC_SUPABASE_ANON_KEY` —Å Vercel
2. –û—Ç–∫—Ä–æ–π: <https://jwt.io>
3. –í—Å—Ç–∞–≤—å –∫–ª—é—á –≤ "Encoded"
4. –ü—Ä–æ–≤–µ—Ä—å –ø–æ–ª–µ `"role"` –≤ payload:
   - ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å `"anon"` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
   - ‚ùå –ï—Å–ª–∏ `"service_role"` ‚Üí —ç—Ç–æ –æ—à–∏–±–∫–∞! –ù—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ anon key

**–ï—Å–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π:**

- –û—Ç–∫—Ä–æ–π: <https://supabase.com/dashboard/project/jgnnrdrqzcwnhuuvhlfo/settings/api>
- –°–∫–æ–ø–∏—Ä—É–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π **anon/public key**
- –û–±–Ω–æ–≤–∏ –Ω–∞ Vercel
- –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç

---

### 3. –ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ–¥–µ–ø–ª–æ–µ–Ω?

**–ü—Ä–æ–≤–µ—Ä—å:**

1. Vercel Dashboard ‚Üí Deployments
2. –ü–æ—Å–º–æ—Ç—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. –ö–æ–≥–¥–∞ –±—ã–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π?

**–ï—Å–ª–∏ –¥–µ–ø–ª–æ–π —Å—Ç–∞—Ä—ã–π:**

- –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç (Redeploy)
- –ò–ª–∏: `git commit --allow-empty -m "Redeploy" && git push`

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–ê–ì 1: –ü–æ–ª—É—á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏

**–õ–æ–∫–∞–ª—å–Ω–æ —É —Ç–µ–±—è –µ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏:**

```bash
cd /Users/sanecek/tema/ai-chat-pro
./get-vercel-env.sh
```

**–°–∫–æ–ø–∏—Ä—É–π –≤—ã–≤–æ–¥** ‚Äî —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

---

### –®–ê–ì 2: –î–æ–±–∞–≤—å –Ω–∞ Vercel

**1. –û—Ç–∫—Ä–æ–π Vercel:**

- <https://vercel.com/dashboard>
- –ù–∞–π–¥–∏ –ø—Ä–æ–µ–∫—Ç (–º–æ–∂–µ—Ç –±—ã—Ç—å `ai-chat-pro` –∏–ª–∏ `chatedem.com`)

**2. –û—Ç–∫—Ä–æ–π Environment Variables:**

- Settings ‚Üí Environment Variables

**3. –î–æ–±–∞–≤—å/–æ–±–Ω–æ–≤–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):**

```
NEXT_PUBLIC_SUPABASE_URL=https://jgnnrdrqzcwnhuuvhlfo.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impnbm5yZHJxemN3bmh1dXZobGZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU3NjU1NTgsImV4cCI6MjA3MTM0MTU1OH0.BZBBo_yNxr7EQqmiI6toKI8y9BEpSjbFQraCo_h7I4A
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impnbm5yZHJxemN3bmh1dXZobGZvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NTc2NTU1OCwiZXhwIjoyMDcxMzQxNTU4fQ.cmYE8P_vlN_YNjvXI6JqEb7hiheIC5YUe0ptu5rvW0Y
OPENAI_API_KEY=sk-proj-... (—Ç–≤–æ–π API –∫–ª—é—á –∏–∑ .env.local)
NEXT_PUBLIC_APP_URL=https://chatedem.com
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:**

- –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —É–∂–µ –µ—Å—Ç—å ‚Üí –æ–±–Ω–æ–≤–∏ –µ—ë
- –í—ã–±–µ—Ä–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è: **Production**, **Preview**
- –°–æ—Ö—Ä–∞–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

### –®–ê–ì 3: –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–µ–ø–ª–æ–π –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö!**

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ Vercel Dashboard**

1. Deployments ‚Üí –Ω–∞–π–¥–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
2. –ù–∞–∂–º–∏ "Redeploy"
3. –ü–æ–¥–æ–∂–¥–∏ 2-3 –º–∏–Ω—É—Ç—ã

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ Git**

```bash
cd /Users/sanecek/tema/ai-chat-pro
git commit --allow-empty -m "Redeploy with correct env vars"
git push origin main
```

---

### –®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**1. –ü–æ–¥–æ–∂–¥–∏ 2-3 –º–∏–Ω—É—Ç—ã** –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

**2. –û—Ç–∫—Ä–æ–π:** <https://chatedem.com>

**3. –í–æ–π–¥–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç**

**4. –û—Ç–ø—Ä–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç**

**5. –ü—Ä–æ–≤–µ—Ä—å:**

- ‚úÖ –ï—Å–ª–∏ —á–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!
- ‚ùå –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ 401 ‚Üí –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Vercel (—Å–º. –Ω–∏–∂–µ)

---

## üîç –ï–°–õ–ò –ù–ï –ü–û–ú–û–ì–õ–û: –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏

**1. –û—Ç–∫—Ä–æ–π Vercel Dashboard:**

- Functions ‚Üí Logs

**2. –û—Ç–ø—Ä–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç**

**3. –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏:**

- –ù–∞–π–¥–∏ –æ—à–∏–±–∫—É 401
- –ü–æ—Å–º–æ—Ç—Ä–∏ –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**

- "Invalid JWT" –∏–ª–∏ "token is not from a valid issuer"
- "NEXT_PUBLIC_SUPABASE_ANON_KEY is not defined"
- –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–ï—Å–ª–∏ –≤–∏–¥–∏—à—å –æ—à–∏–±–∫—É –ø—Ä–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å
- –ù—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

---

## üìã –ß–ï–ö–õ–ò–°–¢

- [ ] –û—Ç–∫—Ä—ã–ª Vercel Dashboard
- [ ] –ù–∞—à—ë–ª –ø—Ä–æ–µ–∫—Ç
- [ ] –û—Ç–∫—Ä—ã–ª Settings ‚Üí Environment Variables
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `NEXT_PUBLIC_SUPABASE_ANON_KEY` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å anon key!)
- [ ] –û–±–Ω–æ–≤–∏–ª/–¥–æ–±–∞–≤–∏–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- [ ] –í—ã–±—Ä–∞–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è: Production, Preview
- [ ] –°–æ—Ö—Ä–∞–Ω–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [ ] –ü–µ—Ä–µ–¥–µ–ø–ª–æ–∏–ª –ø—Ä–æ–µ–∫—Ç (Redeploy)
- [ ] –ü–æ–¥–æ–∂–¥–∞–ª 2-3 –º–∏–Ω—É—Ç—ã
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –Ω–∞ <https://chatedem.com>
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏ Vercel (–µ—Å–ª–∏ –æ—à–∏–±–∫–∞ –æ—Å—Ç–∞–ª–∞—Å—å)

---

## ‚ö†Ô∏è –°–ê–ú–ê–Ø –ß–ê–°–¢–ê–Ø –û–®–ò–ë–ö–ê

**90% —Å–ª—É—á–∞–µ–≤:** `NEXT_PUBLIC_SUPABASE_ANON_KEY` —Å–æ–¥–µ—Ä–∂–∏—Ç service role key –≤–º–µ—Å—Ç–æ anon key

**–†–µ—à–µ–Ω–∏–µ:**

1. –û—Ç–∫—Ä–æ–π: <https://supabase.com/dashboard/project/jgnnrdrqzcwnhuuvhlfo/settings/api>
2. –°–∫–æ–ø–∏—Ä—É–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π **anon/public key** (–ù–ï service role!)
3. –û–±–Ω–æ–≤–∏ –Ω–∞ Vercel
4. –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç

---

## üöÄ –ë–´–°–¢–†–´–ô –§–ò–ö–°

**–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –±—ã—Å—Ç—Ä–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**

1. **–ü–æ–ª—É—á–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

   ```bash
   cd /Users/sanecek/tema/ai-chat-pro
   ./get-vercel-env.sh
   ```

2. **–°–∫–æ–ø–∏—Ä—É–π –≤—ã–≤–æ–¥**

3. **–î–æ–±–∞–≤—å –Ω–∞ Vercel:**
   - Settings ‚Üí Environment Variables
   - –î–æ–±–∞–≤—å/–æ–±–Ω–æ–≤–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
   - –í—ã–±–µ—Ä–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è: Production, Preview
   - –°–æ—Ö—Ä–∞–Ω–∏

4. **–ü–µ—Ä–µ–¥–µ–ø–ª–æ–π:**
   - Deployments ‚Üí Redeploy

5. **–ü–æ–¥–æ–∂–¥–∏ 2-3 –º–∏–Ω—É—Ç—ã** –∏ –ø—Ä–æ–≤–µ—Ä—å —Å–Ω–æ–≤–∞

---

**–í—ã–ø–æ–ª–Ω–∏ —ç—Ç–∏ —à–∞–≥–∏ –∏ –æ—à–∏–±–∫–∞ 401 –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å! üöÄ**
