# üí≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ YooKassa

## üîë –ì–¥–µ –Ω–∞–π—Ç–∏ –∫–ª—é—á–∏ YooKassa

### –ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç:

1. **–í–æ–π–¥–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç:** https://yookassa.ru/my
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞** ‚Üí **–ö–ª—é—á–∏ API**
3. –°–∫–æ–ø–∏—Ä—É–π:
   - **Shop ID** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456`)
   - **Secret Key** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `test_...` –∏–ª–∏ `live_...`)

### –ï—Å–ª–∏ –Ω–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞:

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** https://yookassa.ru/join
2. **–°–æ–∑–¥–∞–π –º–∞–≥–∞–∑–∏–Ω**
3. **–ü–æ–ª—É—á–∏ –∫–ª—é—á–∏** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

---

## üìù –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–∏ –≤ –ø—Ä–æ–µ–∫—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–æ (.env.local)

**–§–∞–π–ª:** `ai-chat-pro/.env.local`

–î–æ–±–∞–≤—å:
```env
YK_SHOP_ID=—Ç–≤–æ–π_shop_id
YK_SECRET_KEY=—Ç–≤–æ–π_secret_key
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í Vercel (Production)

1. **Vercel Dashboard:** https://vercel.com/moytelefonmsk-6183s-projects/ai-chat-pro
2. **Settings** ‚Üí **Environment Variables**
3. –î–æ–±–∞–≤—å:
   - **Name:** `YK_SHOP_ID` ‚Üí **Value:** —Ç–≤–æ–π shop ID
   - **Name:** `YK_SECRET_KEY` ‚Üí **Value:** —Ç–≤–æ–π secret key
4. –í—ã–±–µ—Ä–∏ **Production, Preview, Development**
5. **Save**
6. **Redeploy** –ø—Ä–æ–µ–∫—Ç

---

## üîß –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook

### –í YooKassa:

1. **YooKassa Dashboard** ‚Üí **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
2. **–î–æ–±–∞–≤–∏—Ç—å URL:**
   ```
   https://chatedem.com/api/yookassa/webhook
   ```
3. **–°–æ–±—ã—Ç–∏—è:** –≤—ã–±–µ—Ä–∏ `payment.succeeded`
4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å**

### –ü—Ä–æ–≤–µ—Ä–∫–∞:

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ YooKassa –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ —Ç–≤–æ–π webhook –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–õ–æ–∫–∞–ª—å–Ω–æ:**
   ```bash
   cd ai-chat-pro
   npm run dev
   ```
   –û—Ç–∫—Ä–æ–π http://localhost:3000/account
   –ù–∞–∂–º–∏ "–ÆKassa" ‚Üí –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã

2. **Production:**
   –û—Ç–∫—Ä–æ–π https://chatedem.com/account
   –ù–∞–∂–º–∏ "–ÆKassa" ‚Üí –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º

YooKassa –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º:
- **–¢–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏** –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `test_`
- **–†–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏** –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `live_`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –Ω–∞—á–Ω–∏ —Å —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–ª—é—á–µ–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.

---

## üìç –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–ª—é—á–∏

**–§–∞–π–ª—ã:**
- `src/app/api/yookassa/checkout/route.ts` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- `src/app/api/yookassa/webhook/route.ts` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- `process.env.YK_SHOP_ID`
- `process.env.YK_SECRET_KEY`

---

## ‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ **–ù–∏–∫–æ–≥–¥–∞** –Ω–µ –∫–æ–º–º–∏—Ç—å –∫–ª—é—á–∏ –≤ Git
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π `.env.local` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π Vercel Environment Variables –¥–ª—è production
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ (`live_`) –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –≤ production

---

## üéØ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–µ–π:
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –¥–µ–ø–ª–æ–π –≤ Vercel
2. –ù–∞—Å—Ç—Ä–æ–π webhook –≤ YooKassa
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –æ–ø–ª–∞—Ç—É

**–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å ‚Äî —Å–∫–∞–∂–∏!**

