# üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –û–®–ò–ë–ö–ò 401

## üéØ –ß–¢–û –ü–†–û–í–ï–†–ò–¢–¨ –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°

### 1. –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Vercel

**–ö–†–ò–¢–ò–ß–ù–û:** –û—Ç–∫—Ä–æ–π Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å:**
- `NEXT_PUBLIC_SUPABASE_URL` = `https://xxx.supabase.co`
- `NEXT_PUBLIC_SUPABASE_ANON_KEY` = `eyJ...` (anon/public key, –ù–ï service role!)
- `SUPABASE_SERVICE_ROLE_KEY` = `eyJ...` (service role key)

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å:**
1. –û—Ç–∫—Ä–æ–π Supabase Dashboard ‚Üí Settings ‚Üí API
2. –°—Ä–∞–≤–Ω–∏ –∫–ª—é—á–∏:
   - **anon/public** ‚Üí –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - **service_role** ‚Üí –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ `SUPABASE_SERVICE_ROLE_KEY`

**–ï—Å–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç:**
- –°–∫–æ–ø–∏—Ä—É–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏
- –û–±–Ω–æ–≤–∏ –Ω–∞ Vercel
- **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–µ—Ä–µ–¥–µ–ø–ª–æ–π!**

---

### 2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Vercel

1. –û—Ç–∫—Ä–æ–π: Vercel Dashboard ‚Üí Functions ‚Üí Logs
2. –û—Ç–ø—Ä–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç
3. –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
```
Auth error: { error: ..., message: "Your authentication token is not from a valid issuer" }
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—à—å —ç—Ç—É –æ—à–∏–±–∫—É:**
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ò–ª–∏ —Ç–æ–∫–µ–Ω –∏—Å—Ç—ë–∫

---

### 3. –ü—Ä–æ–≤–µ—Ä—å —Ç–æ–∫–µ–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –≤—ã–ø–æ–ª–Ω–∏:

```javascript
// –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ Supabase –∫–ª–∏–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
const { data: { session } } = await supabase.auth.getSession();
console.log('Session:', session);
console.log('Token:', session?.access_token?.substring(0, 20) + '...');
```

**–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –ø—É—Å—Ç–æ–π:**
- –í—ã–π–¥–∏ –∏ –≤–æ–π–¥–∏ —Å–Ω–æ–≤–∞
- –ü—Ä–æ–≤–µ—Ä—å cookies

---

### 4. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∫–æ–¥ –∑–∞–¥–µ–ø–ª–æ–µ–Ω

1. –û—Ç–∫—Ä–æ–π: Vercel Dashboard ‚Üí Deployments
2. –ü–æ—Å–º–æ—Ç—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –æ–Ω —É—Å–ø–µ—à–Ω—ã–π

**–ï—Å–ª–∏ –¥–µ–ø–ª–æ–π —Å—Ç–∞—Ä—ã–π:**
- –°–æ–∑–¥–∞–π –ø—É—Å—Ç–æ–π –∫–æ–º–º–∏—Ç: `git commit --allow-empty -m "Redeploy"`
- –ó–∞–ø—É—à—å: `git push origin main`

---

## üö® –°–ê–ú–ê–Ø –ß–ê–°–¢–ê–Ø –ü–†–ò–ß–ò–ù–ê

**90% —Å–ª—É—á–∞–µ–≤:** –ù–∞ Vercel –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `NEXT_PUBLIC_SUPABASE_ANON_KEY`

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π Supabase Dashboard ‚Üí Settings ‚Üí API
2. –°–∫–æ–ø–∏—Ä—É–π **anon/public key**
3. –û—Ç–∫—Ä–æ–π Vercel ‚Üí Settings ‚Üí Environment Variables
4. –û–±–Ω–æ–≤–∏ `NEXT_PUBLIC_SUPABASE_ANON_KEY`
5. –ü–µ—Ä–µ–¥–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç

---

## ‚úÖ –ë–´–°–¢–†–´–ô –§–ò–ö–°

–ï—Å–ª–∏ –≤—Å—ë –ø—Ä–æ–≤–µ—Ä–∏–ª –∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ:

1. **–£–±–µ–¥–∏—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ:**
   ```bash
   # –õ–æ–∫–∞–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å .env.local
   cat .env.local | grep SUPABASE
   ```

2. **–°—Ä–∞–≤–Ω–∏ —Å Vercel:**
   - Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables
   - –î–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å!

3. **–ü–µ—Ä–µ–¥–µ–ø–ª–æ–π:**
   ```bash
   git commit --allow-empty -m "Fix: Redeploy with correct env vars"
   git push origin main
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ —á–µ—Ä–µ–∑ 2-3 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è**

---

## üìû –ï–°–õ–ò –ù–ï –ü–û–ú–û–ì–õ–û

–ü—Ä–∏—à–ª–∏:
1. –°–∫—Ä–∏–Ω—à–æ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Vercel (—Å–∫—Ä–æ–π –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–æ –ø–æ–∫–∞–∂–∏ –Ω–∞–∑–≤–∞–Ω–∏—è)
2. –õ–æ–≥–∏ –∏–∑ Vercel Functions
3. –û—à–∏–±–∫—É –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

